<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yikang.protal.dao.QuestionSystemDao" >
  <resultMap id="BaseResultMap" type="com.yikang.protal.entity.Question" >
    <id column="question_id" property="questionId" jdbcType="BIGINT" />
    <result column="title" property="title" jdbcType="VARCHAR" />
    <result column="content" property="content" jdbcType="VARCHAR" />
    <result column="create_user_id" property="createUserId" jdbcType="BIGINT" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="is_delete" property="isDelete" jdbcType="TINYINT" />
    <result column="star" property="star" jdbcType="INTEGER" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>
  
  <resultMap type="com.yikang.protal.entity.Question" id="ExBaseResultMap" extends="BaseResultMap">
	<result column="user_name" property="userName"/>
	<result column="photo_url" property="photoUrl"/>
</resultMap>

  <sql id="Base_Column_List" >
    qu.question_id, qu.title, qu.content, qu.create_user_id, qu.create_time, qu.is_delete, qu.star, qu.update_time
  </sql>
  
  <select id="queryAllQuestions" resultMap="ExBaseResultMap" parameterType="map">
    select 
    <include refid="Base_Column_List" />,user_name as userName,photo_url as photoUrl
    from questions qu
    left join user_infos us on us.user_id = qu.create_user_id  order by qu.update_time desc
  </select>
  
</mapper>